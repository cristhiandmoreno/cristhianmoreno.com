---
layout: default
---
{% assign author = site.data.authors[page.author] %}

<!-- Estilos específicos inyectados -->
<style>
  /* --- LAYOUT GENERAL (Grid 2 columnas) --- */
  .newspaper-wrapper {
    max-width: 1200px;
    margin: 40px auto;
    padding: 0 20px;
    display: grid;
    grid-template-columns: 1fr 300px; /* Contenido | Sidebar */
    gap: 60px;
    align-items: start;
    font-family: var(--font-main);
  }

  .newspaper-main-column { min-width: 0; }

  /* --- HEADER DEL ARTÍCULO --- */
  .newspaper-breadcrumb {
    text-align: center;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 2px;
    color: var(--green-h);
    font-weight: bold;
    border-bottom: 1px solid var(--border-color);
    line-height: 0.1em;
    margin: 10px 0 30px; 
  }
  .newspaper-breadcrumb span { background: var(--bg-color); padding: 0 10px; }

  .newspaper-title {
    font-size: 3.5rem;
    line-height: 1;
    text-align: center;
    margin-bottom: 15px;
    font-weight: 700;
    font-style: italic;
  }

  /* --- TAGS (Debajo del título) --- */
  .newspaper-tags-top {
    text-align: center;
    margin-bottom: 20px;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
  }
  
  /* Modificado para que funcione como botón visualmente idéntico */
  .news-tag-btn {
    font-family: sans-serif;
    font-size: 0.75rem; 
    text-transform: uppercase;
    font-weight: 700;
    color: #666;
    background: transparent; /* Reset de botón */
    border: 1px solid #ccc;
    padding: 3px 8px;
    border-radius: 20px; 
    text-decoration: none;
    transition: all 0.2s ease;
    cursor: pointer; /* Importante para la UX */
  }
  .news-tag-btn:hover {
    background: var(--green-h);
    color: white;
    border-color: var(--green-h);
  }

  .newspaper-lead {
    font-size: 1.3rem;
    text-align: center;
    color: #444;
    font-weight: 300;
    margin-bottom: 30px;
    line-height: 1.4;
    padding: 0 20px;
    font-style: italic;
  }

  /* --- META & SHARE --- */
  .newspaper-meta-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
    padding: 15px 0;
    margin-bottom: 40px;
    font-size: 0.9rem;
  }
  
  .share-minimal { display: flex; gap: 10px; }
  .share-btn-mini {
    width: 30px; height: 30px;
    display: flex; align-items: center; justify-content: center;
    border: 1px solid var(--border-color);
    border-radius: 50%;
    font-size: 0.8rem;
    color: var(--text-color);
    transition: 0.2s;
  }
  .share-btn-mini:hover { background: var(--green-h); color: white; border-color: var(--green-h); }

  /* --- CONTENIDO --- */
  .newspaper-content {
    font-family: 'Merriweather', serif;
    font-size: 1.1rem;
    line-height: 1.7;
    max-width: 65ch;
    text-align: left;
  }
  .newspaper-content p:first-of-type::first-letter {
    float: left; font-size: 5rem; line-height: 0.8; 
    font-weight: 700; font-family: var(--font-main); 
    margin-right: 15px; color: var(--text-color);
  }
  blockquote {
    border-left: none; font-family: var(--font-main);
    font-size: 1.8rem; font-style: italic; text-align: center;
    margin: 40px 0; color: var(--text-color); line-height: 1.3;
  }

  /* --- AUTOR SECTION --- */
  .author-full-section {
    margin-top: 60px;
    background: var(--bg-alt);
    padding: 30px;
    border-top: 4px solid var(--text-color);
  }
  /* Estilo tarjeta clickeable del autor */
  .author-box {
    display: flex; gap: 20px; align-items: center;
    margin-bottom: 30px;
    cursor: pointer; /* Mano al pasar mouse */
    transition: transform 0.2s;
  }
  .author-box:hover { transform: translateX(5px); }
  
  .author-box img {
    width: 90px; height: 90px; border-radius: 50%;
    object-fit: cover; filter: grayscale(100%);
    border: 2px solid var(--green-h);
  }

  .more-from-author h4 {
    text-transform: uppercase; font-size: 0.85rem; letter-spacing: 1px;
    margin-bottom: 15px; border-bottom: 1px solid var(--border-color);
    padding-bottom: 5px;
  }
  .author-posts-grid {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;
  }
  .mini-author-post {
    font-size: 0.9rem; line-height: 1.3; font-weight: bold;
    display: block;
  }
  .mini-author-post:hover { color: var(--green-h); text-decoration: underline; }

  /* --- SIDEBAR --- */
  .newspaper-sidebar {
    position: sticky;
    top: 40px;
    padding-left: 30px;
    border-left: 1px solid var(--border-color);
  }
  .sidebar-header {
    font-family: sans-serif; font-weight: 900; text-transform: uppercase;
    font-size: 0.8rem; letter-spacing: 1px; margin-bottom: 20px;
    border-bottom: 2px solid var(--text-color); padding-bottom: 5px;
  }
  .side-item { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px dotted #ccc; }
  .side-item:last-child { border-bottom: none; }
  
  .side-topic-label {
    font-size: 0.65rem; text-transform: uppercase; color: var(--green-h); font-weight: bold;
    display: block; margin-bottom: 4px;
  }
  .side-title {
    font-family: var(--font-main); font-size: 1.1rem; line-height: 1.2; margin: 0; font-weight: 700;
  }
  .side-title a:hover { color: var(--green-h); }

  /* --- RESPONSIVE --- */

@media (max-width: 600px) {
  .newspaper-content {
    font-size: 1.05rem;
    line-height: 1.58;
    max-width: 100%;
  }

  .newspaper-content p {
    margin-bottom: 0.85em;
  }

  .newspaper-content p:first-of-type::first-letter {
    font-size: 3.2rem;
    line-height: 0.9;
    margin-right: 10px;
  }

  .newspaper-lead {
    font-size: 1.15rem;
    line-height: 1.45;
  }
}


  @media (max-width: 900px) {
    .newspaper-wrapper { grid-template-columns: 1fr; gap: 40px; }
    .newspaper-title { font-size: 2.5rem; }
    .newspaper-sidebar {
      padding-left: 0; border-left: none; border-top: 1px solid var(--border-color);
      padding-top: 40px; position: static;
    }
    .author-posts-grid { grid-template-columns: 1fr; }
  }
</style>

<div class="newspaper-wrapper">

  <!-- COLUMNA IZQUIERDA: ARTÍCULO -->
  <article class="newspaper-main-column">

    <!-- Breadcrumb -->
    <h6 class="newspaper-breadcrumb">
      <span><a href="/el-inconforme" style="text-decoration:none;">El Inconforme / Opinión</a></span>
    </h6>

    <!-- TÍTULO -->
    <h1 class="newspaper-title">{{ page.title }}</h1>

    <!-- 1. CAMBIO AQUÍ: TAGS CON TRIGGERSEARCH (COMO POST.HTML) -->
    {% if page.tags.size > 0 %}
    <div class="newspaper-tags-top">
      {% for tag in page.tags %}
        <!-- Usamos button con onclick en lugar de <a> con href -->
        <button onclick="triggerSearch('{{ tag }}')" class="news-tag-btn">
          {{ tag }}
        </button>
      {% endfor %}
    </div>
    {% endif %}
    
    <!-- DESCRIPCIÓN (Bajada) -->
    {% if page.description %}
      <p class="newspaper-lead">{{ page.description }}</p>
    {% endif %}

    <!-- META + SHARE -->
    <div class="newspaper-meta-row">
      <div>
        Por <a style="cursor: pointer;" onclick="openAuthorModal('{{ page.author }}')"><strong>{{ author.name }}</strong></a> • {{ page.date | date: "%d %b, %Y" }}
      </div>
      
      <div class="share-minimal">
        <a href="https://twitter.com/intent/tweet?text={{ page.title }}&url={{ site.url }}{{ page.url }}" target="_blank" class="share-btn-mini" title="Compartir en Twitter">X</a>
        <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ site.url }}{{ page.url }}" target="_blank" class="share-btn-mini" title="Compartir en LinkedIn">in</a>
        <a href="https://wa.me/?text={{ page.title }} {{ site.url }}{{ page.url }}" target="_blank" class="share-btn-mini" title="Compartir en WhatsApp">Wa</a>
      </div>
    </div>

    <!-- CONTENIDO DEL POST -->
    <div class="newspaper-content">
      {{ content }}
    </div>

    <!-- SECCIÓN AUTOR -->
    <div class="author-full-section">
      <div class="author-box" onclick="openAuthorModal('{{ page.author }}')">
        <img src="{{ author.avatar }}" alt="{{ author.name }}">
        <div>
          <span style="color:var(--green-h); font-weight:900; text-transform:uppercase; font-size:0.75rem;">Columnista</span>
          <h3 style="margin: 0; font-family:var(--font-main); font-size:1.6rem;">{{ author.name }}</h3>
          <p style="margin: 5px 0 0; font-size:0.9rem; opacity:0.8;">{{ author.bio | truncate: 90 }}</p>
          <span style="font-size:0.75rem; text-decoration:underline; font-weight:bold;">Ver perfil completo</span>
        </div>
      </div>

      <div class="more-from-author">
        <h4>Más de {{ author.name }}</h4>
        <div class="author-posts-grid">
          {% assign author_posts = site.posts | where: "author", page.author | where_exp: "item", "item.url != page.url" | limit: 3 %}
          {% for post in author_posts %}
            <a href="{{ post.url }}" class="mini-author-post">
              {{ post.title }}
            </a>
          {% else %}
            <span style="font-size:0.8rem; color:grey;">No hay columnas recientes.</span>
          {% endfor %}
        </div>
      </div>
    </div>

    <div style="text-align:center; margin-top:30px;">
      <a href="/el-inconforme" style="font-weight:bold; text-transform:uppercase; font-size:0.8rem; border-bottom:1px solid black;">
        &larr; Volver a la edición
      </a>
    </div>

  </article>

  <!-- SIDEBAR -->
  <aside class="newspaper-sidebar">
    <div class="sidebar-header">Temas Relacionados</div>
    
    {% assign max_related = 4 %}
    {% assign min_common_tags = 1 %}
    {% assign max_related_counter = 0 %}

    {% for post in site.posts %}
      {% unless post.url == page.url %}
        {% assign same_tag_count = 0 %}
        {% for tag in post.tags %}
          {% if page.tags contains tag %}
            {% assign same_tag_count = same_tag_count | plus: 1 %}
          {% endif %}
        {% endfor %}

        {% if same_tag_count >= min_common_tags %}
          <div class="side-item">
            <span class="side-topic-label">{{ post.tags[0] }}</span>
            <h4 class="side-title"><a href="{{ post.url }}">{{ post.title }}</a></h4>
          </div>
          {% assign max_related_counter = max_related_counter | plus: 1 %}
          {% if max_related_counter >= max_related %}{% break %}{% endif %}
        {% endif %}
      {% endunless %}
    {% endfor %}

    {% if max_related_counter == 0 %}
      <p style="font-size:0.85rem; color:grey; font-style:italic;">No hay artículos relacionados.</p>
    {% endif %}

    <div class="sidebar-header" style="margin-top:50px;">Lo más reciente</div>
    {% assign recent_posts = site.posts | limit: 3 %}
    {% for post in recent_posts %}
       <div class="side-item">
         <h4 class="side-title"><a href="{{ post.url }}" style="font-style:italic;">{{ post.title }}</a></h4>
         <span style="font-size:0.7rem; color:#888;">{{ post.date | date: "%d %b" }}</span>
       </div>
    {% endfor %}
  </aside>
    {% if page.discusion %}
  <section class="comments-section">
    <h3 class="comments-title">Discusión</h3>
    <p class="post-lead">Para entrar en la discusión, tienes que crear una cuenta en <a style="color: var(--green-h)" href="https://github.com/signup" target="_blank">Github</a>, o sino, puedes enviar un correo a crdmcx@gmail.com</p>
    <div class="giscus"></div>
  </section>

<script src="https://giscus.app/client.js"
        data-repo="cristhiandmoreno/comentariosblog"
        data-repo-id="R_kgDOKXXXX"
        data-category="Announcements"
        data-category-id="DIC_kwDOKXXXX"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="es"
        crossorigin="anonymous"
        async>
</script>

</div>

<!-- DISCUSIÓN -->

  <script>
    function updateGiscusTheme() {
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
      const iframe = document.querySelector('iframe.giscus-frame');
      if (!iframe) return;
      iframe.contentWindow.postMessage({ giscus: { setConfig: { theme: theme } } }, 'https://giscus.app');
    }
    const observer = new MutationObserver(updateGiscusTheme);
    observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] });
  </script>
  {% endif %}


<!-- DATOS ESTRUCTURADOS -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "{{ page.schema_type | default: 'OpinionArticle' }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ page.url | absolute_url }}"
  },
  "headline": "{{ page.title | escape }}",
  "image": ["{{ page.image | absolute_url }}"],
  "datePublished": "{{ page.date | date_to_xmlschema }}",
  "dateModified": "{{ page.last_modified_at | default: page.date | date_to_xmlschema }}",
  "author": {
    "@type": "Person",
    "name": "{{ author.name }}",
    "url": "{{author.web}}"

  },
  "publisher": {
    "@type": "Organization",
    "name": "Cristhian Moreno",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ '/assets/favicon.ico' | absolute_url }}"
    }
  },
  "description": "{{ page.description | strip_html | escape }}",
  "articleSection": "{{ page.tags | first }}",
  "keywords": "{{ page.tags | join: ', ' }}",
  "wordCount": "{{ page.content | number_of_words }}",
  "inLanguage": "es-CO",
  "isAccessibleForFree": true
}
</script>
<!-- 2. CAMBIO AQUÍ: SCRIPT DE CONEXIÓN CON BUSCADOR (Igual a post.html) -->
<script>
  function triggerSearch(term) {
    const searchInput = document.getElementById('search-input');
    if(searchInput) {
      // 1. Scroll suave hacia arriba para ver el buscador
      window.scrollTo({ top: 0, behavior: 'smooth' });
      
      // 2. Esperar un momento a que llegue arriba y llenar el buscador
      setTimeout(() => {
        searchInput.value = term;
        searchInput.focus();
        // 3. Disparar manualmente el evento de búsqueda
        const event = new Event('input', { bubbles: true });
        searchInput.dispatchEvent(event);
      }, 500);
    }
  }
</script>
